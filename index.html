<!DOCTYPE html>
<html lang="en">
<head>
    <title>Dead forest burning</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <link rel="shortcut icon" href="assets/beetle2.ico" type="image/x-icon">

    <!--meta data for sharing links on Facebook-->
    <meta property="og:title" content="Dead forests burning"/>
    <!--<meta property="og:url" content=""/>-->
    <meta property="og:description" content="Practice generating a story map."/>
    <meta property="og:image" content="img/social.png"/>

    <!--add required stylesheets-->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.3.1/dist/leaflet.css"/>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.0/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <!--boostrap-->

    <!--leaflet css-->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.3.1/leaflet.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.5.2/animate.min.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.12/css/all.css">
    <link rel="stylesheet" href="https://turban.github.io/Leaflet.Photo/examples/lib/cluster/MarkerCluster.css" />
    <link rel="stylesheet" href="https://turban.github.io/Leaflet.Photo/Leaflet.Photo.css" />


    <!--add favicon for the web page-->
    <link rel="shortcut icon" href="img/favicon.ico" type="image/x-icon">

    <!--Fonts-->
    <link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro" rel="stylesheet">
    <link rel="stylesheet" href="css/main.css" />
    <link rel="stylesheet" type="text/css" href="css/storymap.2.4.css">




    <!--Scripts-->
    <!--add required libraries-->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.3.1/leaflet.js"></script>
    <!--jquery-->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
    <!--boostrap-->
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js"></script>
    http://turban.github.io/Leaflet.Photo/examples/lib/cluster/leaflet.markercluster.js
    <script src="js/leaflet.markercluster-src.js"></script>
    <script src="https://turban.github.io/Leaflet.Photo/Leaflet.Photo.js"></script>


    <!--leaflet.ajax for asynchronously adding geojson data-->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet-ajax/2.1.0/leaflet.ajax.min.js"></script>

    <!--story map plugin-->
    <script src="js/storymap.2.4.js"></script>

    <!-- mini globle map -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.5/d3.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/topojson/1.6.19/topojson.min.js"></script>
    <!--<script src="js/globeminimap.js"></script>-->
    <script src="js/data.js"></script>

</head>
<body>

<nav class="navbar navbar-expand-lg fixed-top navbar-dark bg-dark storymap-navbar">
    <a class="navbar-brand" href="#">
        <img src="img/firebeetle.ico" width="100%" class="inline-block">
        <!--convert the style value to a class and then add the class to the css file.-->
        <!--<img src="img/logo.png" class="d-inline-block align-top">-->
        Dead Forests Burning
    </a>
    <!-- Collect the nav links, forms, and other content for toggling -->
    <div class="collapse navbar-collapse">
        <!--Create class ml-auto for the navbar items you want on the right.-->
        <ul class="navbar-nav ml-auto">
            <li class="nav-item"><a class="nav-link" "="" href="javascript:window.scrollBy(0, $('section[data-scene=\'scene1\']').offset().top - $(window).scrollTop() - $('.storymap-navbar').height() - 30);">Lodgepole&nbsp;Pine Forests</a></li>
            <li class="nav-item"><a class="nav-link" "="" href="javascript:window.scrollBy(0, $('section[data-scene=\'scene2\']').offset().top - $(window).scrollTop() - $('.storymap-navbar').height() - 30);">Beetle&nbsp;Outbreak</a></li>
            <li class="nav-item"><a class="nav-link" "="" href="javascript:window.scrollBy(0, $('section[data-scene=\'scene3\']').offset().top - $(window).scrollTop() - $('.storymap-navbar').height() - 30);">Wildfire</a></li>
            <li class="nav-item"><a class="nav-link" "="" href="javascript:window.scrollBy(0, $('section[data-scene=\'scene4\']').offset().top - $(window).scrollTop() - $('.storymap-navbar').height() - 30);">Forest&nbsp;Regeneration</a></li>

            <li class="nav-link"><a class="fab fa-github" href="https://github.com/taluccia/geog4572.lab5.taluccia" style="top:40px" target="_blank"></a></li>
            <li><a class="fab fa-facebook-square btn" href="https://facebook.com/sharer.php?u=https://taluccia.github.io/geog4572.lab5.taluccia/" target="_blank"></a></li>
            <li><i class="fas fa-info-circle btn" style="top:60px" data-toggle="modal" data-target="#info-modal"></i></li>


        </ul>
    </div>
</nav>




<div id="storymap" class="container-fluid">
    <div class="row">
        <div class="storymap-story">

            <section data-scene="overview" data-background="assets/video_endTrim.mp4">
                <div class="fullscreen text-center">
                </div>
            </section>


                <section data-scene="scene0">
                    <h2>Overview</h2>
                        <div class="container">
                            <p><medium>Overview of forests conditions in central interior British Columbia, Canada.<medium></p>
                            <!--<div class="row text-center index-icon">-->
                                <!--<div class="col-md-3 col-sm-3">-->
									<!--&lt;!&ndash;<span class="fa-stack fa-4x">&ndash;&gt;-->
										<!--<i class="fa fa-map-marker fa-stack-2x text-primary"></i>-->
									<!--</span>-->
                                    <!--<h4>-->
                                        <!--Location-->
                                    <!--</h4>-->
                                    <!--<p class="description">Central Interior British Columbia</p>-->
                                <!--</div>-->
                                <!--<div class="col-md-3 col-sm-3">-->
									<!--<span class="fa-bug fa-4x">-->
										<!--<i class="fa fa-bug fa-bug-2x text-primary"></i>-->
									<!--</span>-->
                                    <!--<h4>-->
                                        <!--Outbreak-->
                                    <!--</h4>-->
                                    <!--<p class="description">18 million hectares</p>-->
                                <!--</div>-->
                                <!--<div class="col-md-3 col-sm-3">-->
									<!--<span class="fa-fire fa-4x">-->
									<!--<i class="fa fa-fire fa-fire-2x text-primary"></i>-->
									<!--</span>-->
                                    <!--<h4>-->
                                        <!--Wildfire.-->
                                    <!--</h4>-->
                                    <!--<p class="description">140,000 hectares</p>-->
                                <!--</div>-->

                            <!--</div>-->
                            <hr>
                            <div class="info-panel">
                                <table style="width:100%">
                                    <tr>
                                        <td> <i class="fa fa-map-marker fa-map-marker-6x text-primary"></i></td>
                                        <td> <p class="description">Location</p></td>
                                        <td> <p class="description">British Columbia</p></td>
                                    </tr>
                                    <tr>
                                        <td> <i class="fa fa-bug fa-bug-6x text-primary"></i></td>
                                        <td> <p class="description">Beetle Outbreak</p></td>
                                        <td> <p class="description">18 Million Hectares</p></td>
                                    </tr>
                                    <tr>
                                        <td> <i class="fa fa-fire fa-fire-7x text-primary"></i></td>
                                        <td> <p class="description">Wildfire</p></td>
                                        <td> <p class="description">140,000 Hectares</p></td>
                                    </tr>
                                </table>

                                <hr>



                        <div>
                            <p><img style="width:400px;" align="center" src="img/timeseries.png"></p> <br/><br/><br/>
                        </div>
                                <hr>
                            <table style="width:100%">
                                <tr>
                                    <td> <i style="background: green;"></i><p>Provincial Parks</p></td>
                                    <td> <i style="background: red;"></i><p>Beetle Outbreak</p></td>
                                    <td> <i style="background: orange;"></i><p>Wildfire</p></td>
                                </tr>
                            </table>
                            <div/>
                            <hr>

                </section>


            </section>

            <section data-scene="scene1">

                <h2>Forests</h2>
                <p>Sub-boreal forests cover vast areas in central interior British Columbia. Forests provide vital services across the region.
                    The forests provide economic value in terms of <strong>timber harvest</strong>. They provide ecosystems services such as <strong>carbon sequestration</strong> and watershed management.
                    Forests provide critical <strong>wildlife habitat</strong> for grizzly bears, caribou, wolverines and various bird species.  </p>

                <p>Lodgepole pine are dominant species in the forests of the central interior. Historically, forest life cycles are influenced by disturbance regimes of <strong>wildfire</strong> and <strong>beetle outbreaks</strong>.
                    wildfire return is typically 100-150 year intervals. Wildfire results in tree mortality and forest initiation.
                    It diversifies the landscape by<span style="color:#ff525c"> creating early</span> successional habitat. Beetle outbreaks kill off mature canopy trees and release understory species.  </p>
                <br>
                <hr>
                <!--<div id="map" class="map"></div>-->
                <!--info panel-->
                <div class="info-panel">
                    <!-- legend patch items -->
                    <table style="width:100%">
                        <tr>
                            <td> <i style="background: #2d6f8e;"></i><p>Lodgepole Pine</p></td>
                            <td> <i style="background: #c2e023;"></i><p>Spruce Hybrid</p></td>
                            <td> <i style="background: #85d54a;"></i><p>White Spruce</p></td>
                        </tr>
                        <tr>
                            <td> <i style="background: #1e9b89;"></i><p>Spruce</p></td>
                            <td> <i style="background: #482173;"></i><p>Aspen</p></td>
                            <td><i style="background: green;"></i><p>Forest</p></td>
                        </tr>
                    </table>
                <hr>
                    <div class="embeded-photo img-responsive img-thumbnail"></div>
                </div>
            </section>

            <section data-scene="scene2">
                <h2>Beetle Outbreak</h2>
                <p>Mountain pine beetles are a natural part of forest ecosystems in western North America. Lodgepole
                    pine trees are the primary host for mountain pine beetles. Warmer winters and and abundance of
                    mature lodgepole pine trees have created ideal conditions for the eruption in beetle populations
                    that have resulted in millions of hectares of tree mortality. Much of the tree mortality has been
                    concentrated in central interior British Columbia.  </p>
                <hr>
                <!--<div id="map" class="map"></div>-->
                <!--info panel-->
                <div class="info-panel">
                     <table style="width:100%">
                        <tr>
                            <td> <i style="background: #ffffb2;"></i><p>Low Mortality</p></td>
                            <td> <i style="background: #feb751;"></i><p>Moderate Mortality</p></td>
                            <td> <i style="background: #f55629;"></i><p>High Mortality</p></td>
                        </tr>
                        <tr>
                            <td> <i style="background: green;"></i><p>Forest</p></td>
                        </tr>
                    </table>
                    <hr>
                    <div class="embeded-photo img-responsive img-thumbnail"></div>
                </div>
            </section>



            <section data-scene="scene3">
                <h2>Wildfire</h2>
                <p>Wildfires initiate new growth for lodgepole pine forests. These ecosystems are often reliant on
                    wildfire to release fire cue seeds from cones in the canopy of lodgepole pine. Without wildfire, no growth is limited.</p>
                <p> These landscape tend to be characterized by stand replacing fire, but even when much of the forest
                    large patches of moderate to high severity fire still occur. This burn severity map shows the post-fire
                    mosaic for three wildfire events. </p>
                <hr>
                <!--<div id="map" class="map"></div>-->
                <!--info panel-->
                <div class="info-panel">
                    <table style="width:100%">
                        <tr>
                            <td> <i style="background: #1A9641;"></i><p>Unburned</p></td>
                            <td> <i style="background: #FFFF33;"></i><p>Light Surface Fire</p></td>
                        </tr>
                        <tr>
                            <td> <i style="background: #FFA500;"></i><p>Severe Surface Fire</p></td>
                            <td> <i style="background: #D7191C;"></i><p>Severe Crown Fire</p></td>
                        </tr>
                    </table>
                    <span>Source:</span>                <a href="https://www.fs.fed.us/postfirevegcondition/documents/publications/FIREMON_LandscapeAssessment.pdf">Burn Severity</a>
                    <hr>
                    <div class="embeded-photo img-responsive img-thumbnail"></div>

                </div>
            </section>



            <section data-scene="scene4">
                <h2>Early Succession</h2>
                <p>Regeneration is critical to forest recovery, and the rate of tree regeneration is variable across the landscape. Post-fire
                    early successional growth increases habitat and species biodiversity. The influx of herbaceous plants - fireweed
                    and Geranium bicknellii attract humming birds, while increased insect activity attracts black backed
                    woodpeckers. Lodgepole pine needs fire to release seeds. Wildfire breaths new life into the landscape
                    after extensive mortality from beetle outbreak  </p>
                <hr>
                <!--<div id="map" class="map"></div>-->
                <!--info panel-->
                <div class="info-panel">
                    <h5> Vegetative Recovery Rate </h5>
                    <!-- legend patch items -->
                    <i style="background: #a6611a;"></i><p>Unchanged</p>
                    <i style="background: #e7d3a5;"></i><p>Low recovery Rate</p>
                    <i style="background: #a7dbd3;"></i><p>Moderate Recovery Rate</p>
                    <i style="background: #018571;"></i><p>High Recovery Rate</p>
                </div>
                <hr>
                <div class="embeded-photo img-responsive img-thumbnail"></div>
            </section>





        <section data-scene="end" data-background="img/end1.png">
            <div class="fullscreen text-center">
            <div class= "end-background-img background-fullscreen-setting text-responsive">
                <p class ="end">
                    Early successional composition and structure increase biodiveristy .</p>
                <div class="credit">
                    <!--<p><img style="width:180px;" align="right" src="img/end1.png"></p> <br/><br/><br/>-->
                    <p>Created by Michael Cook and Anna Talucci From Oregon State University</p>
                </div>
            </div>
        </section>
    </div>

        <!--map div-->
        <div class="col-sm-6 col-md-8 storymap-map"></div>
    </div>



    <!--the info page-->
    <div class="modal fade" id="info-modal" role="dialog">
        <div class="modal-dialog modal-md">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                    <h4 class="modal-title">About</h4>
                </div>
                <div class="modal-body">
                    <p>This is a web map of lodgepole pine forest in transition. In central interior British Columbia,
                        forests have been killed by mountain pine beetle outbreak and then burned during wildfire, which has raised
                        concerns and questions about fire severity and regeneration. This is demo for class lab:
                        Geovisualization provided by Oregon State University. The story map library is derived from the
                        storymap plugin for leaflet at <a>http://atlefren.github.io/storymap/</a>, and its functionality
                        relies on both leaflet and Boostrap.</p>
                    <p><b>storymap.js</b> | Released Date: 02/20/2017 | Version: 2.1 | MIT License </p>
                    <p><b>Author: Anna Talucci</b> | College of Forestry | Oregon State University
                    </p>
                    <p>The context about forest and disturbance history is acquired from previous research (future link to citations).</p>
                    <p>The background video on the front page was generated from field photos. </p>
                    <p>The favicon image was acquired from <a>https://pngtree.com/freepng/green-flame_3478328.html.</a></p>
                    <p>This story map uses geospatial data from mapbox, Google Earth Engine, ESRI Map, Open Street Maps
                        and Data BC.</p>
                </div>
            </div>
        </div>
    </div>
</div>



<!-- main javascript -->
<script type="text/javascript">


    // Create Legend Contents in html format

    var topoLayer = L.tileLayer('https://server.arcgisonline.com/ArcGIS/rest/services/World_Shaded_Relief/MapServer/tile/{z}/{y}/{x}', {
        attribution: 'Tiles &copy; Esri &mdash; Source: Esri',
        maxZoom: 13
    });


     var photoLayer1 = L.photo.cluster().on('mouseover', showPhoto);
    photoLayer1.add(photos1);

    var photoLayer2 = L.photo.cluster().on('mouseover', showPhoto);
    photoLayer2.add(photos2);

    var photoLayer3 = L.photo.cluster().on('mouseover', showPhoto);
    photoLayer3.add(photos3);

    function showPhoto (evt) {

	    var photo = evt.layer.photo;
	    $("section.viewing div.embeded-photo").empty().append("<img src='" + photo.url +"' /> <br/> <p class='text-center'> " +  photo.caption +" <p>");

    }



    var layers = {
        ESRI: {layer: L.tileLayer('http://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}')},

        topo: {layer: topoLayer},

	    photo1: {layer: photoLayer1},

        photo2: {layer: photoLayer2},

        photo3: {layer: photoLayer3},

        parks: {layer: L.geoJson.ajax('assets/parks.geojson', {
                color: 'green',
                weight: 0,
                opacity: 0.7
            }),
        },

        fire: {layer: L.geoJson.ajax('assets/fire.perimeters.geojson', {
                color: 'orange',
                weight: 2,
                opacity: 0.7
            }),
        },

        mpb: {layer: L.geoJson.ajax('assets/2005_beetlearea3.geojson', {
                color: 'red',
                weight: 0,
                opacity: 0.7
            }),
        },
        beetle: {layer: L.tileLayer('assets/tilesoutbreak/{z}/{x}/{y}.png')},

        vri: {layer: L.tileLayer('assets/tilesvir/{z}/{x}/{y}.png')},

        GEE: {
            layer: L.tileLayer('http://earthengine.google.org/static/hansen_2013/tree_alpha/{z}/{x}/{y}.png')

        },

        burn: {
            layer: L.tileLayer('assets/tilesburn/{z}/{x}/{y}.png')

        },
        recovery: {
            layer: L.tileLayer('assets/tilesrecovery/{z}/{x}/{y}.png')

        },
        cartodb_light: {layer: L.tileLayer('http://cartodb-basemaps-{s}.global.ssl.fastly.net/light_all/{z}/{x}/{y}.png')}
    };

    var scenes = {
        overview: {lat: 53.248971, lng: -125.644940, zoom: 7, name: 'Cover Page', layers: []},
        scene0: {lat: 53.29826, lng: -125.69520, zoom: 7, name: 'Overview', layers: [layers.mpb, layers.parks, layers.fire]},
        scene1: {lat: 53.29826, lng: -125.69520, zoom: 10, name: 'Lodgepole Pine Forests', layers: [layers.vri, layers.photo1]},
        scene2: {lat: 53.269461, lng: -125.863468, zoom: 10, name: 'Beetle Outbreak', layers: [layers.GEE,layers.beetle, ]},
        scene3: {lat: 53.271870, lng: -125.782894, zoom: 10, name: 'Wildfire', layers: [layers.ESRI, layers.burn, layers.photo2]},
        scene4: {lat: 53.271870, lng: -125.782894, zoom: 10, name: 'Forest Regeneration', layers: [layers.ESRI, layers.recovery, layers.photo3]},
        end: {lat: 53.248971, lng: -125.644940, zoom: 7, name: 'The End', layers: []}
    };

    $('#storymap').storymap({
        scenes: scenes,
        baselayer: layers.cartodb_light,
        legend: true, // if you do not want a legend feature, you can simply not define the createLegend function.
        credits: "",
        navbar: false,
        loader: true,
        scalebar: false,
        flyo: true,
        navwidget: true,
mapinteraction:false,
        createMap: function () {
            // create a map in the "map" div, set the view to a given place and zoom
            var map = L.map($(".storymap-map")[0], {
                zoomControl: false, scrollWheelZoom: false, fadeAnimation: true,
                zoomAnimation: true
            }).setView([53, -125.5], 7);


            return map;
        }
    });
</script>
</body>

</html>